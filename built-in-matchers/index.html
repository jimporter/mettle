<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Built-in Matchers - mettle</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../css/prettify-1.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link href="../css/extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">mettle</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Home</a>
                </li>
            
            
            
                <li >
                    <a href="../install">Installation</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../tutorial">Tutorial</a>
                        </li>
                    
                        <li >
                            <a href="../running-tests">Running Tests</a>
                        </li>
                    
                        <li >
                            <a href="../writing-tests">Writing Tests</a>
                        </li>
                    
                        <li >
                            <a href="../expectations">Expectations</a>
                        </li>
                    
                        <li class="active">
                            <a href=".">Built-in Matchers</a>
                        </li>
                    
                        <li >
                            <a href="../writing-matchers">Writing Your Own Matchers</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li >
                    <a href="../developer">Developer Guide</a>
                </li>
            
            
            
                <li >
                    <a href="../license">License</a>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../expectations">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../writing-matchers">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/jimporter/mettle/">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#built-in-matchers">Built-in Matchers</a></li>
        
            <li><a href="#core">Core</a></li>
        
            <li><a href="#relational">Relational</a></li>
        
            <li><a href="#arithmetic">Arithmetic</a></li>
        
            <li><a href="#combinatoric">Combinatoric</a></li>
        
            <li><a href="#collection">Collection</a></li>
        
            <li><a href="#exception">Exception</a></li>
        
            <li><a href="#death">Death</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="built-in-matchers">Built-in Matchers</h1>
<p>Mettle comes with a set of general-purpose matchers that should cover the most
common cases. We'll look at each of them below.</p>
<h2 id="core">Core</h2>
<h3 id="anything">anything()</h3>
<p>A matcher that always returns <code>true</code>. This is useful primarily as a placeholder,
e.g. when you can't know for sure what an expected value is going to be, but you
still want to test it.</p>
<h3 id="is_notmatcher">is_not(<em>matcher</em>)</h3>
<p>A matcher that negates another matcher.</p>
<h3 id="describematcher-desc">describe(<em>matcher</em>, <em>desc</em>)</h3>
<p>A matcher that overrides the description of another matcher. <code>desc</code> is a string
describing the resulting matcher. This can be useful for when the default
description is unclear or overly-verbose.</p>
<h3 id="filterfunc-matcher-desc">filter(<em>func</em>, <em>matcher</em>[, <em>desc</em>])</h3>
<p>A matcher that filters the expected value through a function before passing it
to another matcher. This helps when creating complex matchers that test multiple
parts of a type, such as:</p>
<pre><code class="c++">all( filter([](auto &amp;&amp;x) { return x.first;  }, equal_to(&quot;first&quot;)),
     filter([](auto &amp;&amp;x) { return x.second; }, greater(0)) );
</code></pre>

<p>Additionally, you may pass in a string for <code>desc</code>, which will be added as a
prefix to <code>matcher</code>'s description. This helps provide useful output explaining
what exactly <code>func</code> is doing to the expected value.</p>
<h2 id="relational">Relational</h2>
<h3 id="equal_tovalue">equal_to(<em>value</em>)</h3>
<p>A matcher that returns <code>true</code> when the expected value is equal to <code>value</code>
according to the <code>==</code> operator.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>equal_to</code> is also the <em>implicit matcher</em>. Any time a matcher takes another
matcher as an argument, you can pass in a value, and it will be implicitly
converted to <code>equal_to(value)</code>. This doesn't work for the root matcher; you
need to explicitly say <code>equal_to(value)</code> in that case.</p>
</div>
<h3 id="not_equal_tovalue">not_equal_to(<em>value</em>)</h3>
<p>A matcher that returns <code>true</code> when the expected value is not equal to <code>value</code>
according to the <code>!=</code> operator.</p>
<h3 id="greatervalue">greater(<em>value</em>)</h3>
<p>A matcher that returns <code>true</code> when the expected value is greater than <code>value</code>
according to the <code>&gt;</code> operator.</p>
<h3 id="greater_equalvalue">greater_equal(<em>value</em>)</h3>
<p>A matcher that returns <code>true</code> when the expected value is greater than or equal
to <code>value</code> according to the <code>&gt;=</code> operator.</p>
<h3 id="lessvalue">less(<em>value</em>)</h3>
<p>A matcher that returns <code>true</code> when the expected value is less than <code>value</code>
according to the <code>&lt;</code> operator.</p>
<h3 id="less_equalvalue">less_equal(<em>value</em>)</h3>
<p>A matcher that returns <code>true</code> when the expected value is less than or equal to
<code>value</code> according to the <code>&lt;=</code> operator.</p>
<h2 id="arithmetic">Arithmetic</h2>
<h3 id="near_tovalue-epsilon">near_to(<em>value</em>[, <em>epsilon</em>])</h3>
<p>A matcher that returns <code>true</code> when the expected value is approximately equal to
<code>value</code>, specifically when:</p>
<pre><code class="c++">auto mag = std::max&lt;T&gt;(std::abs(expected), std::abs(actual));
std::abs(actual - expected) &lt;= mag * epsilon;
</code></pre>

<p>If <code>epsilon</code> is not specified, it defaults to
<code>std::numeric_limits&lt;T&gt;::epsilon() * 10</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As with most functions that check if two floating point numbers are
approximately equal, this matcher will likely fail if one of the values is
zero. In that case, use <code>near_to_abs</code>.</p>
</div>
<h3 id="near_to_absvalue-tolerance">near_to_abs(<em>value</em>, <em>tolerance</em>)</h3>
<p>A matcher that returns <code>true</code> when the expected value is approximately equal to
<code>value</code>, specifically when <code>std::abs(actual - expected) &lt;= tolerance</code>.</p>
<h2 id="combinatoric">Combinatoric</h2>
<h3 id="anymatchers">any(<em>matchers...</em>)</h3>
<p>A matcher that returns <code>true</code> when <em>any of</em> its composed matchers are true.</p>
<h3 id="allmatchers">all(<em>matchers...</em>)</h3>
<p>A matcher that returns <code>true</code> when <em>all of</em> its composed matchers are true.</p>
<h3 id="nonematchers">none(<em>matchers...</em>)</h3>
<p>A matcher that returns <code>true</code> when <em>none of</em> its composed matchers are true.</p>
<h2 id="collection">Collection</h2>
<h3 id="membermatcher">member(<em>matcher</em>)</h3>
<p>A matcher that returns <code>true</code> when an item in a collection matches the composed
matcher.</p>
<h3 id="eachmatcher">each(<em>matcher</em>)</h3>
<p>A matcher that returns <code>true</code> when <em>every</em> item in a collection matches the
composed matcher.</p>
<h3 id="eachrange-meta_matcher">each(<em>range</em>, <em>meta_matcher</em>)</h3>
<p>A matcher that returns <code>true</code> when each item in a collection matches the
corresponding item in <em>range</em> according to the matcher built from
<code>meta_matcher</code>. <em>range</em> can be any iterable collection, including a
<code>std::initializer_list</code>. This is roughly equivalent to:</p>
<pre><code class="c++">array( meta_matcher(range[0]), meta_matcher(range[1]), ...
       meta_matcher(range[n]) )
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When <code>meta_matcher</code> is a template function, be careful about how you pass it
in. For instance, <code>equal_to&lt;int&gt;</code> will expect an rvalue-reference to an
<code>int</code>. If <code>range</code> is an lvalue, you'll need to pass <code>equal_to&lt;const int &amp;&gt;</code>
instead.</p>
</div>
<h3 id="eachbegin-end-meta_matcher">each(<em>begin</em>, <em>end</em>, <em>meta_matcher</em>)</h3>
<p>A matcher that returns <code>true</code> when each item in a collection matches the
corresponding item in the range [<code>begin</code>, <code>end</code>) according to the matcher built
from <code>meta_matcher</code>.</p>
<h3 id="arraymatchers">array(<em>matchers...</em>)</h3>
<p>A matcher that returns <code>true</code> when the <em>ith</em> item in a collection matches the
<em>ith</em> composed matcher, <em>and</em> the number of items in the collection is equal to
the number of composed matchers.</p>
<h3 id="tuplematchers">tuple(<em>matchers...</em>)</h3>
<p>Similar to <code>array</code>, but applies to tuples instead (or anything else with a
<code>std::get&lt;I&gt;()</code> overload). This matcher returns <code>true</code> when the <em>ith</em> item in a
tuple matches the <em>ith</em> composed matcher. Since the size of a tuple can be
determined at compile time, a length mismatch between the tuple and the number
of composed matchers will cause a compiler error.</p>
<h3 id="sortedcomparator">sorted([<em>comparator</em>])</h3>
<p>A matcher that returns <code>true</code> when the collection is sorted according to the
binary predicate <code>comparator</code> (or the less-than operator if <code>comparator</code> isn't
supplied).</p>
<h3 id="permutationrange-predicate">permutation(<em>range</em>[, <em>predicate</em>])</h3>
<p>A matcher that returns <code>true</code> if a permutation of <code>range</code> exists that equals
the collection according for the binary predicate <code>predicate</code> (or the equality
operator if <code>predicate</code> isn't supplied).</p>
<h3 id="permutationbegin-end-predicate">permutation(<em>begin</em>, <em>end</em>[, <em>predicate</em>])</h3>
<p>A matcher that returns <code>true</code> if the range [<code>begin</code>, <code>end</code>) is a permutation of
the collection for the binary predicate <code>predicate</code> (or the equality operator if
<code>predicate</code> isn't supplied).</p>
<h2 id="exception">Exception</h2>
<p>Exception matchers work a bit differently from other matchers. Since we can't
catch an exception after the fact, we have to pass a function to our
expectation instead:</p>
<pre><code class="c++">expect([]() { throw std::runtime_error(&quot;uh oh&quot;); },
       thrown&lt;std::runtime_error&gt;(&quot;uh oh&quot;));
</code></pre>

<h3 id="throwntypewhat_matcher">thrown&lt;<em>Type</em>&gt;(<em>what_matcher</em>)</h3>
<p>A matcher that returns <code>true</code> if an exception of type <code>Type</code> (or a subclass of
<code>Type</code>) is thrown and whose <code>what()</code> member function matches <code>what_matcher</code>.</p>
<h3 id="throwntype">thrown&lt;<em>Type</em>&gt;()</h3>
<p>A matcher that returns <code>true</code> if an exception of type <code>Type</code> (or a subclass of
<code>Type</code>) is thrown; equivalent to: <code>thrown&lt;Type&gt;(anything())</code>.</p>
<h3 id="thrown">thrown()</h3>
<p>A matcher that returns <code>true</code> if an exception of <em>any</em> type <code>Type</code> is thrown.</p>
<h3 id="thrown_rawtypematcher">thrown_raw&lt;<em>Type</em>&gt;(<em>matcher</em>)</h3>
<p>A matcher that returns <code>true</code> if an exception of type <code>Type</code> (or a subclass of
<code>Type</code>) is thrown and whose value matches <code>matcher</code>.</p>
<h2 id="death">Death</h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These matchers are currently unusable on Windows. Sorry about that!</p>
</div>
<p>The most kvlt of all matchers, death matchers check that a function would cause
the process to terminate, either by signalling or by exiting. (These matchers
will fork a child process before calling the function so that the test
framework doesn't terminate.) Like <a href="#exception-matchers">exception matchers</a>,
death matchers require a function to be passed to the expectation:</p>
<pre><code class="c++">expect([]() { abort(); }, killed(SIGABRT));
</code></pre>

<h3 id="killedmatcher">killed([<em>matcher</em>])</h3>
<p>A matcher that returns <code>true</code> if the function terminated the process via a
signal. If <code>matcher</code> is specified, <code>killed</code> will only return <code>true</code> if the
signal that was raised matches <code>matcher</code>.</p>
<h3 id="exitedmatcher">exited([<em>matcher</em>])</h3>
<p>A matcher that returns <code>true</code> if the function terminated the process by exiting
(i.e. with <code>exit</code>, <code>_exit</code>, or <code>_Exit</code>). If <code>matcher</code> is specified, <code>exited</code>
will only return <code>true</code> if the exit status matches <code>matcher</code>.</p>
</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/prettify-1.0.min.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>